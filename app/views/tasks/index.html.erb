


<div class ="container">
 <div class = "row">
  <div class = "col-xs-3 col-xs-offset-4"> 
    <%= form_for @todo,url:category_tasks_path do |f| %>
     <%= f.label :task, 'タスク名'%>
     <%= f.text_field :task, class:'form-control form-size'%>
     <%= f.submit '追加', class: 'btn btn-primary btn-block' %>
    <% end %>
   
  </div>
  <div class =""></div>
  
  <div class ="col-xs-9 space">
    
    <table>
    <thead>
        <tr>
            
            <th>タスク</th>
            <th colspan="3"></th>
        </tr>
    </thead>
     <tbody>
      <div class = "categorylist">
        <% @todos.each do |todo| %>
            <tr>
                <td>

                    <%#= link_to category_tasks_path(category.id) do %>
                    <!--<div id = "checked">-->
                    <%#= button_to todo.task, onclick="changeUnderline('target');" %>
                    <!--<input type="button" value= "" onclick="changeUnderline('target');"/>-->
                    <!--<div id="text" onclick="changeStyle();">-->
                    <!--<p >ここをクリックすると取り消し線が引かれたり消えたりする。</p>-->
                    <div class ="content">
                    <%#= check_box_tag :checkbox %>
                    <input type="checkbox" id=<%= todo.id %>><%= todo.task %><br>

                    <%#= label_tag :checkbox,   todo.task %>
                         
                     </div>
                    <!--</div>-->
                        <%#= binding.pry %>
                    <%# end %>
                    <%#= button_tag type: 'button', onclick: "changeUnderline('target');" do %>
                      <%#= todo.task %>
                    <%# end %>
                </td>
                <td><%= link_to edit_category_task_path(todo.category_id,todo.id) do %>
                    <i class="fas fa-edit"></i>
                    <% end %>
                </td>
                <td><%= link_to category_task_path(todo.category_id,todo.id), method: :delete do %>
                        <i class="fas fa-trash-alt"></i>
                    <% end %>
                </td>
            </tr>
        <% end %>
     </div>
    </tbody>
    </table>
     
  </div>
 </div>
</div>

<script>
  $(":checkbox").click(function() {

  if ($(this).is(":checked"))
  {
    $(this).closest("td").css("text-decoration", "line-through");
  }
  else {
    $(this).closest("td").css("text-decoration", "none");
  }

});
</script>


<script>
window.addEventListener('load', function() {
    // var c = []
    var checkbox_array = '<%== JSON.dump(@checkbox_array) %>';
    console.log(checkbox_array);
    // [checkbox_array].filter(element => console.log(element[0]) );
    // console.log(c);
    // console.log(c);
    console.log(document.getElementById(checkbox_array));
    var c = [
        document.getElementById("c1"),
        document.getElementById('33'),
        document.getElementById("32")
    ];
    var chklist;
    if (document.cookie) {
        chklist = document.cookie.split(",");
    };
    c.forEach(function(ci, i) {
        if (chklist && chklist[i] === 'true') ci.checked = true;
        ci.addEventListener('click', function() {
            var x = [];
            c.forEach(function(cj) {
                x.push(cj.checked);
            });

            var expire = new Date();
            expire.setTime(expire.getTime() + 1000 * 3600 * 24);
            document.cookie = x.join(',') + ',; expires=' + expire.toUTCString();
        });
    });
    
});
</script>

<input type="checkbox" id="c1">テキスト1<br>
<input type="checkbox" id="c2">テキスト2<br>
<input type="checkbox" id="c3">テキスト3



// <script>
// window.addEventListener('load', function() {
//         var c = []
//     var checkbox_array = '<%#== JSON.dump(@checkbox_array) %>';
//     [checkbox_array].filter(element =>c.push(document.getElementById(element.to_s)) );
    
//     // var c = [
//     //     document.getElementById('c1'),
//     //     document.getElementById('c2'),
//     //     document.getElementById('c3')
//     // ];
//     var chklist;
//     if (document.cookie) {
//         chklist = document.cookie.split(",");
//     };
//     c.forEach(function(ci, i) {
//         if (chklist && chklist[i] === 'true') ci.checked = true;
//         ci.addEventListener('click', function() {
//             var x = [];
//             c.forEach(function(cj) {
//                 x.push(cj.checked);
//             });

//             var expire = new Date();
//             expire.setTime(expire.getTime() + 1000 * 3600 * 24);
//             document.cookie = x.join(',') + ',; expires=' + expire.toUTCString();
//         });
//     });
    
// });
// </script>

<!--<input type="checkbox" id="c1">テキスト1<br>-->
<!--<input type="checkbox" id="c2">テキスト2<br>-->
<!--<input type="checkbox" id="c3">テキスト3-->
<br>


